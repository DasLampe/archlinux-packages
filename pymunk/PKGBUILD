# Maintainer: Massimiliano Torromeo <massimiliano.torromeo@gmail.com>
# Contributor: Dan Serban
# Contributor: Fabio Volpe

pkgname=pymunk
pkgver=2.0.0
pkgrel=2
pkgdesc="A wrapper around the 2d physics library Chipmunk"
arch=(any)
url=http://code.google.com/p/pymunk/
license=MIT
depends=(python2 chipmunk)
makedepends=(gcc)
source=("http://pymunk.googlecode.com/files/$pkgname-$pkgver.zip")
md5sums=('850615bae6990d5c39d530f45d1eed29')

build() {
	cd $pkgname-$pkgver
	rm -rf build
	rm pymunk/*.{so,dll}
	python2 setup.py build
}

package() {
	cd $pkgname-$pkgver
	python2 setup.py install --root="$pkgdir"
	_site_packages=$(python2 -sSc 'import site; print site.getsitepackages()[0]')
	ln -s "/usr/lib/libchipmunk.so" "$pkgdir$_site_packages/$pkgname/libchipmunk64.so"
	ln -s "/usr/lib/libchipmunk.so" "$pkgdir$_site_packages/$pkgname/libchipmunk.so"
}
