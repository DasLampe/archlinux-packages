# Maintainer: Massimiliano Torromeo <massimiliano.torromeo@gmail.com>
# Contributor: Martin Erik Werner ("arand") <martinerikwerner@gmail.com>

pkgname=redeclipse
pkgver=1.2
pkgrel=1
pkgdesc="A single-player and multi-player first-person ego-shooter, built as a total conversion of Cube Engine 2"
arch=('i686' 'x86_64')
url="http://redeclipse.net"
license=('custom' 'CCPL' 'ZLIB' 'MIT')
depends=('sdl_image'  'libgl' 'sdl_mixer' 'hicolor-icon-theme')
makedepends=('mesa' 'imagemagick')
install=redeclipse.install
source=(http://downloads.sourceforge.net/${pkgname}/${pkgname}_${pkgver}_linux_bsd.tar.bz2)

md5sums=('896a6d1be2ee1fd50930d7f3e873e2b6')

build() {
	cd "$srcdir/$pkgname/src"
	make
}

package() {
	cd "$srcdir/$pkgname"

	make -C src DESTDIR="$pkgdir" prefix=/usr system-install

	# fix incorrect link created by makefile
	rm "$pkgdir/usr/lib/redeclipse/data"
	ln -s /usr/share/redeclipse/data "$pkgdir/usr/lib/redeclipse/data"

	install -Dm644 license.txt "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
	install -Dm644 trademark.txt "$pkgdir/usr/share/licenses/$pkgname/TRADEMARK"
}
